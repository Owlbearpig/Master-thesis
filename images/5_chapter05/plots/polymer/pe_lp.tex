\documentclass{standalone}
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usepackage{pgfplots}
\usepackage{siunitx}
\pgfplotsset{compat=1.5}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{arrows.meta}
\usepackage{pgfplotstable}

\begin{document}
\pgfplotsset{
    table/search path={plot_data/5_chapter05/polymer/pe},
}

\pgfplotstableread[col sep=comma]{cp_pe.csv}\cpdata
\pgfplotstableread[col sep=comma]{lp_pe.csv}\lpdata

\def\graphArrow#1#2#3{
    \pgfmathsetmacro{\xcolind}{int(#1)}
    \pgfmathsetmacro{\ycolind}{int(#1+1)}
    
    \pgfplotstablegetelem{7}{[index]\xcolind}\of#3
    \pgfmathsetmacro{\xs}{\pgfplotsretval}
    \pgfplotstablegetelem{7}{[index]\ycolind}\of#3
    \pgfmathsetmacro{\ys}{\pgfplotsretval}

    \pgfplotstablegetelem{10}{[index]\xcolind}\of#3
    \pgfmathsetmacro{\xe}{\pgfplotsretval}
    \pgfplotstablegetelem{10}{[index]\ycolind}\of#3
    \pgfmathsetmacro{\ye}{\pgfplotsretval}
    
    \addplot[-{Latex[length=10, width=5]}, #2] coordinates {(\xs,\ys) (\xe,\ye)};
}


\begin{tikzpicture}
	\begin{axis}[
	    %ymode=log,
	    %xmode=log,
        ymin=-1.1, ymax=1.1,
        xmin=-1.1, xmax=1.1,
        %no markers,
        every axis plot/.append style={},
        axis line style = very thick,
        every tick/.style={black, very thick},
        xlabel=$E_x$ (\si{\volt/\meter}),
        ylabel=$E_y$ (\si{\volt/\meter}),
        %anchor=origin,
        %legend entries={{\SI{0.30}{\tera \hertz}}, {\SI{0.60}{\tera \hertz}}, {\SI{1.20}{\tera \hertz}}, {\SI{1.50}{\tera \hertz}}, {\SI{1.65}{\tera \hertz}}, {\SI{1.75}{\tera \hertz}}, {\SI{1.85}{\tera \hertz}}},
        legend style={legend columns=1, at={(1,1)}, anchor=north west,
                      nodes={scale=0.90, transform shape}},
        ]
        \addplot[thick, red] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, orange] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, yellow] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, black] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, blue] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, cyan] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, green] coordinates {(-2,-2) (-2,-2)};
        
        \addplot [gray, no markers, ] coordinates {(-1,-1) (1,-1)};
        \addplot [gray, no markers, ] coordinates {(-1,-1) (-1,1)};
        \addplot [gray, no markers, ] coordinates {(-1,1) (1,1)};
        \addplot [gray, no markers, ] coordinates {(1,1) (1,-1)};
        \addplot [gray, no markers, ] coordinates {(-1,0) (1,0)};
        \addplot [gray, no markers, ] coordinates {(0,-1) (0,1)};
        
        \addplot[thick, red] table [x index = 1, y index = 2, col sep=comma]\lpdata;
        \addplot[thick, orange] table [x index = 201, y index = 202, col sep=comma]\lpdata;
        \addplot[thick, yellow] table [x index = 401, y index = 402, col sep=comma]\lpdata;
        \addplot[thick, black] table [x index = 601, y index = 602, col sep=comma]\lpdata;
        \addplot[thick, blue] table [x index = 701, y index = 702, col sep=comma]\lpdata;
        
        \graphArrow{1}{red}{\lpdata}
        \graphArrow{201}{orange}{\lpdata}
        \graphArrow{401}{yellow}{\lpdata}
        \graphArrow{601}{black}{\lpdata}
        \graphArrow{701}{blue}{\lpdata}
        %\addplot[-{Latex[length=10, width=5]}, green] coordinates {(0.256,0.0) (0.10,0.15)};
        %\addplot[-{Latex[length=10, width=5]}, cyan] coordinates {(0.825,0.0) (0.73,0.15)};
        %\addplot[-{Latex[length=10, width=5]}, red] coordinates {(0.96,0) (0.96,0.1)};
        %\addplot[-{Latex[length=10, width=5]}, blue] coordinates {(0.75,0.595) (0.7,0.66)};
        %\addplot[-{Latex[length=10, width=5]}, orange] coordinates {(0.5,0.85) (0.45,0.875)};
        %\addplot[-{Latex[length=10, width=5]}, yellow] coordinates {(0.95,0.33) (0.85,0.53)};
        %\addplot[-{Latex[length=10, width=5]}, black] coordinates {(0.97,0.23) (0.94,0.33)};
	\end{axis}
    
\end{tikzpicture}
\begin{tikzpicture}
	\begin{axis}[
	    %ymode=log,
	    %xmode=log,
        ymin=-1.1, ymax=1.1,
        xmin=-1.1, xmax=1.1,
        %no markers,
        every axis plot/.append style={},
        axis line style = very thick,
        every tick/.style={black, very thick},
        xlabel=$E_x$ (\si{\volt/\meter}),
        ylabel=$E_y$ (\si{\volt/\meter}),
        %anchor=origin,
        legend entries={{\SI{75}{\giga \hertz}}, {\SI{85}{\giga \hertz}}, {\SI{95}{\giga \hertz}}, {\SI{105}{\giga \hertz}}, {\SI{110}{\giga \hertz}}},
        legend style={legend columns=1, at={(1,1)}, anchor=north west,
                      nodes={scale=0.90, transform shape}},
        ]
        % legend hack ...
        \addplot[thick, red] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, orange] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, yellow] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, black] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, blue] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, cyan] coordinates {(-2,-2) (-2,-2)};
        \addplot[thick, green] coordinates {(-2,-2) (-2,-2)};
        
        \addplot [gray, no markers, ] coordinates {(-1,-1) (1,-1)};
        \addplot [gray, no markers, ] coordinates {(-1,-1) (-1,1)};
        \addplot [gray, no markers, ] coordinates {(-1,1) (1,1)};
        \addplot [gray, no markers, ] coordinates {(1,1) (1,-1)};
        \addplot [gray, no markers, ] coordinates {(-1,0) (1,0)};
        \addplot [gray, no markers, ] coordinates {(0,-1) (0,1)};
        
        \addplot[thick, red] table [x index = 1, y index = 2, col sep=comma]\cpdata;
        \addplot[thick, orange] table [x index = 201, y index = 202, col sep=comma]\cpdata;
        \addplot[thick, yellow] table [x index = 401, y index = 402, col sep=comma]\cpdata;
        \addplot[thick, black] table [x index = 601, y index = 602, col sep=comma]\cpdata;
        \addplot[thick, blue] table [x index = 701, y index = 702, col sep=comma]\cpdata;
        
        \graphArrow{1}{red}{\cpdata}
        \graphArrow{201}{orange}{\cpdata}
        \graphArrow{401}{yellow}{\cpdata}
        \graphArrow{601}{black}{\cpdata}
        \graphArrow{701}{blue}{\cpdata}
        
        %\addplot[-{Latex[length=10, width=5]}, red] coordinates {(0.64,0.735) (0.60,0.77)};
        %\addplot[-{Latex[length=10, width=5]}, orange] coordinates {(0.85,0.53) (0.8,0.6)};
        %\addplot[-{Latex[length=10, width=5]}, yellow] coordinates {(0.6,0.8) (0.5,0.87)};
        %\addplot[-{Latex[length=10, width=5]}, black] coordinates {(1,0) (0.985,0.2)};
        %\addplot[-{Latex[length=10, width=5]}, blue] coordinates {(0.63,0) (0.634,0.2)};
        %\addplot[-{Latex[length=10, width=5]}, cyan] coordinates {(0.163,0) (0.163,0.2)};
        %\addplot[-{Latex[length=10, width=5]}, green] coordinates {(0.28,0) (0.28,0.2)};
	\end{axis}
    
\end{tikzpicture}


\end{document}
